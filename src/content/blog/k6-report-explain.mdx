---
title: 'K6 報告指標說明'
description: 'k6 可以透過 Grafana 及 InfluxDB 來產生易監測的壓測報告，透過三者的結合，可以將測試數據存儲在InfluxDB中，然後通過Grafana創建漂亮的圖表和儀表板，以便更好地監控和分析應用程序的性能。'
pubDate: '2023/08/28'
heroImage: '../../assets/k6/grafana.jpeg'
category: 'Testing'
tags: ['stress testing', 'testing', 'k6']
---

## 壓力測試中重要的指標數據

1. **虛擬使用者數量（Virtual Users）**：了解在不同負載下系統的表現。這有助於確定系統能夠處理的最大同時連接數。

2. **每秒請求數（Request per Second）**：這是評估系統處理請求的能力的關鍵指標。較高的每秒請求數表示系統具有更好的性能。

3. **每秒錯誤數（Errors Per Second）**：這可以幫助你了解系統在不同負載下的穩定性。高錯誤率可能指示了潛在的問題。

4. **平均回應時間（Average Response Time）**：這個指標表示每個請求的平均處理時間。較低的回應時間表示系統反應更迅速。

5. **百分位數回應時間（Percentile Response Time）**：除了平均回應時間，你還應該關注不同百分位數的回應時間。例如，第 95 百分位數回應時間表示有 95% 的請求在這個時間內完成。

6. **每秒檢查數（Checks Per Second）**：這個指標幫助你了解驗證檢查的效率，確保回應的正確性。

7. **錯誤率（Error Rate）**：這是錯誤請求數佔總請求數的比例。低錯誤率通常是良好性能的指標。

8. **伺服器資源使用率**：除了測試報告中的指標，你也可以監測伺服器的 CPU 使用率、記憶體使用率等，以確保系統在測試期間未出現資源瓶頸。

# Dashboard

- **Virtual Users（虛擬使用者）**

  - 指壓力測試時模擬的使用者數量。
    ![虛擬使用者](https://cvws.icloud-content.com/B/ATrvq87UVlYY3qtBYg9Awipt3noDAV7fKMNwAPwdFvbnNOSpOnaW8aev/VUs%28virtual+users%29.png?o=AoXYeLKFkohecfmHtQhG28LrzfUoics6R9gdvwaDizaS&v=1&x=3&a=CAogFcVsD_kg1C_jV4TmSo9cQWcNjSmW_bGEveJtomZ1x_USaxDe07zXozEY3rCY2aMxIgEAUgRt3noDWgSW8aevaiU3Ma9dSs3rptV9_skpxBn-qCLB4Adzezk9X-epjtZgTtIEw_G5ciVtdnA_YfWgjZYD3UeSEhVUiRbPb90tXVGRBqa7LRqTAn88GgE4&e=1693209466&fl=&r=bc2ea60d-ae6a-4dc2-a680-09e9136d0b38-1&k=h30VMO8wskToI021TNq3WA&ckc=com.apple.clouddocs&ckz=com.apple.CloudDocs&p=117&s=5PVxpb5vPSJXrTm4AsEdvaOl2qg&cd=i)

- **Request per Second（每秒請求數）**

  - 指伺服器在壓力測試時，每秒處理的請求數量。
    ![每秒請求數](https://cvws.icloud-content.com/B/AXARIrDdcTrAWVvBfR7ZWBT37AzNAc9ESx4J-oNuDxlsyDDa8SzYpvTz/RPs%28request+per+second%29.png?o=AmGJaYE9eb8kXsfLfT2uC6N-B9HboTY5g8-hdN0mIJhn&v=1&x=3&a=CAogsAc4z95OI3p4eDKKVA9HxTFBjR9my443FRFxAe7E3Y0SaxCK673XozEYisiZ2aMxIgEAUgT37AzNWgTYpvTzaiUcGHD7pkdOt6ntXMRxHhrtm7SNWjnmNK1VAgrYu2-uq7o2aAK5ciUjQ-p-4RgrDKsecBOCjRKw0LL28mJEyUEnWalB68VD0czpU3fC&e=1693209486&fl=&r=53bd1782-38af-4e9f-83e8-6b4182cd2901-1&k=aPFaDbFNT3d3UICspNgymQ&ckc=com.apple.clouddocs&ckz=com.apple.CloudDocs&p=117&s=CVfr7t9TNy_5h_8vARdEp6_hgm0&cd=i)

- **Errors Per Second（每秒錯誤數）**

  - 指伺服器在壓力測試時，每秒處理的錯誤數量，其中包含但不限於伺服器錯誤、請求失敗、超時。

- **Checks Per Second（每秒檢查數）**

  - 指伺服器在壓力測試時，每秒驗證檢查的次數，如回應的正確性、頁面內容是否符合預期。

### http_req_duration（整體回應時間）

![http_req_duration](<../../assets/k6/http_duration(mean).png>)

{' '}

<details>
	<summary>http_req_duration(mean)</summary>- 此指標指的是所有回應時間的平均值。
</details>

![http_req_duration(max)](https://cvws.icloud-content.com/B/AUZNVuz0qYzeJ3ioTeRXnLIECxiMAQ-B2fuH15mZGH4AIthJJHJA4_aB/http_duration%28max%29.png?o=Aqefm8ZLrEvZUzN66bOrAdZg3k9ckuEb1Wg_VzziBAs-&v=1&x=3&a=CAogcCNeC3ZCnAikLSgKsLldej3seG3OpRJdg_lMpq1-jgkSaxCknsvXozEYpPum2aMxIgEAUgQECxiMWgRA4_aBaiX3BkNofSlKfJtWW9us3hqbEslHVNngFK5A9kapTHF0E3FpyD6zciWOndSgUenUCg2PiCzCPN5J0Oy7EuhBao-05ShwLe8FSaWyLTDw&e=1693209705&fl=&r=d31affd5-5b52-465b-9587-b08cf2ff3a23-1&k=8a39tJ35Q5qNenyAd9Cm8Q&ckc=com.apple.clouddocs&ckz=com.apple.CloudDocs&p=117&s=XWBLtLej-PozzT6vhisEh823HD8&cd=i)

{' '}

<details>
	<summary>http_req_duration(max)</summary>- 此指標指的是所有回應中花費最久的時間
</details>

![http_req_duration(med)](https://cvws.icloud-content.com/B/AZ3VAf_wPVq7LnQMJXDPnx3NfMYWAZzVIy8vC1H-IL99XVNBjRu2bXGu/http_duration%28med%29.png?o=ApL16nwtEzSCr9GjUvKetGMP5xYZm2hUO9tzSczLwp7q&v=1&x=3&a=CAogqe3QnfNPuTIsd-OPreueHO3LbKOpoPm7sVRi4UeUnxUSaxDY8c3XozEY2M6p2aMxIgEAUgTNfMYWWgS2bXGuaiVPeBnkGwXWUK82ltiWU_2javRW5uqAI5XPLGZazZGS4c8YtrsWciXSgBarjxPgKD2BYM1CAe7rofa2I4CI942v-p2KHZ7OmFFs44qA&e=1693209749&fl=&r=9df12fe4-7805-41bf-901b-5c913dbec7cc-1&k=UyJJUsC-FnwdQxvuwc2T_A&ckc=com.apple.clouddocs&ckz=com.apple.CloudDocs&p=117&s=JPJyGCMg1VYF25paI7izvbVohyo&cd=i)

{' '}

<details>
	<summary>http_req_duration(med)</summary>- 這個指標指的是所有回應時間中的中位數時間 - 跟 `mean`
	相比，中位數時間會更有參考價值
</details>

![http_req_duration(min)](https://cvws.icloud-content.com/B/AWUD8skgXDIuplG3j2NE-EdMbXrMAaZasmII_FHnPNUId1F7-rg8xIAQ/http_duration%28min%29.png?o=AruF3zULZFLYN3Glr_EoizShPjfRyF2zgS84JztEPFho&v=1&x=3&a=CAogfqZ0-e3jl8WlyWcfrDrPhAi4BvXT-pH8GRoMWQp4P7oSaxCz9M7XozEYs9Gq2aMxIgEAUgRMbXrMWgQ8xIAQaiUvYiKZLYBLBWqxkPc2jB4jPKJW6d6qTjSo53FTgWm0whsdre7JciUA-wLHZosshnb5W-6E6RU4AGmT3Ud26yOgG-5MG2fV_GA4LrC_&e=1693209766&fl=&r=ebacb3bb-a841-4b63-8810-f5013c31c0b6-1&k=sPO0fk0QLbQAF5IC0UHTKg&ckc=com.apple.clouddocs&ckz=com.apple.CloudDocs&p=117&s=4aawG2NOr4yHnFT3BuzBcvuXqdc&cd=i)

{' '}

<details>
	<summary>http_req_duration(min)</summary>- 此指標指的是所有回應時間中，花費最短的時間
</details>

![http_req_duration(min)](https://cvws.icloud-content.com/B/ARvHAFGAhQJsrYGEpd8bSBuzprueAZtDncXGLfwamILy9c95iIJZ16zy/http_duration%28p90%29.png?o=Alr4pGL32YVhRl0SXWv1yDct1z1V3KUKDygj9q5VCBHC&v=1&x=3&a=CAog4o_SNUW5SAqHf2pI8pXdVQX4irHYEIOr-MHWb9dTzSkSaxDZxdHXozEY2aKt2aMxIgEAUgSzprueWgRZ16zyaiXAgZu0YYJsLZxRR5blWJjxyVeFsRYdLiQ4qLu566jFOZEeyKjbciWqUrorc_DkV-wz4CmWXoBVqh7eoCgjcYH0Rni7z3O5ef5Mi0UR&e=1693209809&fl=&r=3ab3c9d6-3e11-4cd5-b275-d67c088c5bab-1&k=d34IWcXYP0e6C7ZfyoJ5Rw&ckc=com.apple.clouddocs&ckz=com.apple.CloudDocs&p=117&s=C3R415cMloWdKx62zUNkJLmylVI&cd=i)

{' '}

<details>
	<summary>http_req_duration(p90)</summary>
	- 此指標是指所有回應的時間中，90% 的回應時間
	<br />- 公式計算舉例：
	<pre>
		<code>
			// 假設你有一組請求回應時間數據（以毫秒為單位） const responseTimes = [100, 150, 200, 250,
			300, 350, 400, 450, 500, 550]; // 將這些數據從小到大進行排序 const sortedResponseTimes =
			responseTimes.sort((a, b) => a - b); // 計算第 90 百分位數位置 const percentileIndex =
			Math.floor(sortedResponseTimes.length * 0.9); // 找到排在第 90 百分位數位置的數據 const
			p90Value = sortedResponseTimes[percentileIndex]; console.log(`http_req_duration(p90) 的值是 $
			{p90Value} 毫秒`); http_req_duration(p90) 的值是 500 毫秒
		</code>
	</pre>
</details>

![http_req_duration(min)](https://cvws.icloud-content.com/B/AcE2uux8DR5D8ntrbqGmY9NI6NXLAcL4bY_gCGm-P7MIlL1KKzbJXXlV/http_duration%28p95%29.png?o=An-5qALOIjfl9WM50oPGWUuika6xFTSfcm3WIJL_-lKZ&v=1&x=3&a=CAog3ZTByKXihYhVw5UgGPOkawRFOZDC9E2bMIc1xcRU7kgSaxDb7NLXozEY28mu2aMxIgEAUgRI6NXLWgTJXXlVaiUpUPiDai8URZDbXMb7nfv_Ib0QmK9Bs-kpt4d0Zi_q90JEq46hciUW-c5bWzCo9Oj56J9Ew5IipU7lZ2IIBEeVN-Yfx1s3HyicNWwa&e=1693209830&fl=&r=7bbf357f-4583-4f21-92a0-9dbc487682f3-1&k=H52ofKEJWS3Nf0uVGSdUbQ&ckc=com.apple.clouddocs&ckz=com.apple.CloudDocs&p=117&s=p_mtQ0HXjbJKrGQedgYY8QjPxqs&cd=i)

{' '}

<details>
	<summary>http_req_duration(p95)</summary>- 此指標是指所有回應的時間中，95% 的回應時間
</details>

![http_req_duration(min)](https://cvws.icloud-content.com/B/AflvYxA1o7iNZrDJCyX7CJpKBX_IAfZr7Dsq82fxhimpQMXionkLuSXK/httq_duration%28overtime%29.jpg?o=Ao8TciDz8VjBHHHKEQA-gEsiJvs_V3SvSc5ju8jTAMpu&v=1&x=3&a=CAogr2T_bAUKag8JRL6qtzs0Q0bwu588ylSRp6eCfLxpgwYSaxD6g_bXozEY-uDR2aMxIgEAUgRKBX_IWgQLuSXKaiXrcV2hN7E8lTSUqtkwuXfSpPJcOZ_GpdK8v9cJGulpEC01840SciVM8YTf6UaJ96ZOsHoYBjNDdEYfyPfstLPA9ntVJD4IvanP69_2&e=1693210407&fl=&r=3ce1f562-7aa9-4085-8b06-e058e05c4a4e-1&k=8kf1e8omLJ8xutJNwULleA&ckc=com.apple.clouddocs&ckz=com.apple.CloudDocs&p=117&s=1kWh4mBZR3ulWHg4xaHvdNPNM9o&cd=i)

- 以總覽曲線圖來說，需要在意的是最小值 `(min)` 跟 `p90` 的值有沒有差很多，如果差很多，表示在該時間段伺服器有可能發生不穩的情況，導致大部分人的請求到回應時間偏長，只有極少數人是可以用較短的時間完成整個請求過程的。

### http_req_blocked（請求阻塞時間）

- **http_req_blocked(mean)：平均阻塞時間**

  - 這個指標表示所有請求的平均阻塞時間。較低的阻塞時間意味著請求能夠更快地送達伺服器，減少等待時間。

- **http_req_blocked(max)：最長阻塞時間**

  - 這個指標代表整個壓力測試過程中，某個請求的阻塞時間達到最長的情況。它可以幫助你識別在某些情況下可能出現的極端延遲。

- **http_req_blocked(med)：中位數阻塞時間**

  - 這個指標將所有請求的阻塞時間從小到大排序，然後找到中間的那個值，即為中位數阻塞時間。它能夠幫助你了解大多數請求的等待情況。

- **http_req_blocked(min)：最短阻塞時間**

  - 這個指標代表整個壓力測試過程中，某個請求的阻塞時間達到最短的情況。它可以幫助你了解在最佳情況下的等待時間。

- **http_req_blocked(p90)：90% 百分位數阻塞時間**

  - 這個指標表示在所有請求中，有 90% 的請求的阻塞時間都在這個時間內。這有助於識別大多數使用者在等待方面的體驗。

- **http_req_blocked(p95)：95% 百分位數阻塞時間**

  - 這個指標代表在所有請求中，有 95% 的請求的阻塞時間都在這個時間內。這能夠幫助你了解更高百分比使用者的等待情況。

### http_req_connecting（連線時間）

- **http_req_connecting(mean)：平均連線時間**

  - 此指標指的是所有連線時間的平均值。

- **http_req_connecting(max)：最長連線時間**

  - 此指標指的是所有連線時間中花費最久的時間。

- **http_req_connecting(med)：中位數連線時間**

  - 這個指標指的是所有連線時間中的中位數時間。跟平均值相比，中位數時間更有參考價值。

- **http_req_connecting(min)：最短連線時間**

  - 此指標指的是所有連線時間中，花費最短的時間。

- **http_req_connecting(p90)：90% 百分位數連線時間**

  - 此指標是指所有連線時間中，90% 的連線時間。

- **http_req_connecting(p95)：95% 百分位數連線時間**

  - 此指標是指所有連線時間中，95% 的連線時間。

### 其他相關指標

- **http_req_tls_handshaking：TLS 連線建立時間**

- **http_req_receiving：接收回應時間**

- **http_req_waiting：等待伺服器回應時間（不包含連線建立時間）**
